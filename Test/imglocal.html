<html>
<head>
<script src="../Js/Base.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Insert title here</title>
</head>
<body>
		商品图片 <input type="file" id="fileUp" onchange="chgImg(this);"/><br>
		<img src="" height="200" width="200" id="xs"/>

    <img id="image" src="" />
    <br />
    <input type="file" onchange="selectImage(this);" />
    <br />
    <script>
        /*function imgUrl(file) {
            var url = null
            if (window.createObjectURL != undefined) { // basic  
                url = window.createObjectURL(file)
            } else if (window.URL != undefined) { // mozilla(firefox)  
                url = window.URL.createObjectURL(file)
            } else if (window.webkitURL != undefined) { // webkit or chrome  
                url = window.webkitURL.createObjectURL(file)
            }
            return url;
        }*/
        function chgImg(fi)
		{
		var f0=fi.files[0],
             ou =window[window.URL ? 'URL' : 'webkitURL']['createObjectURL'](f0);// imgUrl(fi.files[0]);
			if (ou&&f0.size < 1024000 * 5){
				C.G("xs").src=ou;
			}
			else
			alert("图片超过5M或不存在");
        };

        //第二种h5
    var image = '';
    function selectImage(file) {
        if (!file.files || !file.files[0]) {
            return;
        }
        var reader = new FileReader();
        reader.onload = function (evt) {
            document.getElementById('image').src = evt.target.result;
            image = evt.target.result;
        }
        reader.readAsDataURL(file.files[0]);
    }
    </script>
</body>
</html>